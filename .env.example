# JSON:API Frontend - Next.js Starter Environment Variables
# Copy this file to .env.local and configure for your environment.

# =============================================================================
# REQUIRED
# =============================================================================

# The base URL of your Drupal site (used for API calls)
DRUPAL_BASE_URL=https://your-drupal-site.com

# =============================================================================
# DEPLOYMENT MODE
# =============================================================================

# Deployment mode determines how traffic flows between Next.js and Drupal.
#
# 'split_routing' (default)
#   - Drupal stays on main domain
#   - External router (Cloudflare, nginx) directs specific paths to Next.js
#   - No DNS change required
#   - Middleware proxy is disabled
#
# 'nextjs_first'
#   - Next.js on main domain, handles all traffic
#   - Non-headless content is proxied to Drupal origin
#   - Best performance, requires DNS change
#   - Middleware proxy is enabled
#
DEPLOYMENT_MODE=split_routing

# =============================================================================
# NEXT.JS FIRST MODE (only needed if DEPLOYMENT_MODE=nextjs_first)
# =============================================================================

# Drupal origin URL (where Drupal is accessible after DNS change)
# This is where the proxy sends non-headless requests.
# Often a subdomain like cms.example.com or the server's direct IP.
# DRUPAL_ORIGIN_URL=https://cms.example.com

# Proxy secret for origin protection (REQUIRED for production)
# Get this from your Drupal admin: /admin/config/services/jsonapi-frontend
# Drupal will reject direct requests that don't include this secret.
# DRUPAL_PROXY_SECRET=your-secret-from-drupal-admin

# =============================================================================
# CACHE REVALIDATION
# =============================================================================

# Secret for webhook-based cache revalidation (REQUIRED for production)
# Must match the "Revalidation secret" in Drupal admin at
# /admin/config/services/jsonapi-frontend
# When Drupal content changes, it sends a webhook to /api/revalidate
# which invalidates Next.js cache tags for instant content updates.
REVALIDATION_SECRET=your-secret-from-drupal-admin

# =============================================================================
# IMAGE SECURITY
# =============================================================================

# Restrict which domains can serve images (RECOMMENDED for production)
# Without this, any domain can be used for image sources.
# Set to your Drupal domain for security.
# DRUPAL_IMAGE_DOMAIN=cms.example.com
